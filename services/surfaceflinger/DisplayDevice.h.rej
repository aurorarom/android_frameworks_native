diff a/services/surfaceflinger/DisplayDevice.h b/services/surfaceflinger/DisplayDevice.h	(rejected hunks)
@@ -226,6 +235,36 @@ private:
     int mPowerMode;
     // Current active config
     int mActiveConfig;
+
+#ifdef MTK_AOSP_ENHANCEMENT
+private:
+    // debugging
+    void drawDebugLine() const;
+
+    int mHwOrientation;
+
+    // for performance check
+    mutable FpsCounter mFps;
+
+    // which display could be mirrored
+    int32_t mHwcMirrorId;
+
+    // used to check if display has changed
+    mutable bool mMustRecompose;
+public:
+    // correct geometry by device hw orientation
+    void correctSizeByHwOrientation(uint32_t &w, uint32_t &h) const;
+    void correctRotationByHwOrientation(Transform::orientation_flags &rotation) const;
+    void correctCropByHwOrientation(Rect& crop) const;
+
+    int32_t getHwcMirrorId() const { return mHwcMirrorId; }
+    void setHwcMirrorId(int32_t mirrorId) { mHwcMirrorId = mirrorId; }
+
+    void setMustRecompose(bool mustRecompose) { mMustRecompose = mustRecompose; }
+
+    // mustRecompose is called to check if need to recompose
+    bool mustRecompose() const;
+#endif // MTK_AOSP_ENHANCEMENT
 };
 
 }; // namespace android
